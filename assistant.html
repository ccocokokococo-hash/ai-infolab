<!doctype html>
<html lang="kk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI-–ò–Ω—Ñ–æLab ‚Äî AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div class="container">
    <nav class="nav">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>AI-–ò–Ω—Ñ–æLab</h1>
          <p>AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (—ñ—à–∫—ñ + embed)</p>
        </div>
      </div>
      <div class="nav-links">
        <a class="chip" href="index.html">–ë–∞—Å—Ç—ã –±–µ—Ç</a>
        <a class="chip" href="test.html">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</a>
        <a class="chip" href="results.html">–ù”ô—Ç–∏–∂–µ</a>
        <a class="chip" href="tasks.html">–ü—Ä–∞–∫—Ç–∏–∫–∞</a>
        <a class="chip active" href="assistant.html">–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</a>
      </div>
    </nav>

    <section class="hero">
      <h2>AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</h2>
      <p class="muted">–ë“±–ª –±–µ—Ç—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –±”©–ª–µ–∫ –∞—à—ã–ª–∞–¥—ã. –°–æ–Ω—ã–º–µ–Ω “õ–∞—Ç–∞—Ä –±–∞—Ä–ª—ã“õ –±–µ—Ç—Ç–µ —Ç”©–º–µ–Ω–≥—ñ –æ“£ –∂–∞“õ—Ç–∞ AI –±–∞—Ç—ã—Ä–º–∞—Å—ã –±–∞—Ä.</p>
    </section>

    <section class="grid">
      <div class="card">
        <h3>–Ü—à–∫—ñ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
        <p class="muted">“ö–∞—Ç–µ —Ç–∞–ª–¥–∞—É, —Ü–∏–∫–ª, —à–∞—Ä—Ç, –º–∞—Å—Å–∏–≤, –¥–µ“£–≥–µ–π —Ç—É—Ä–∞–ª—ã –∂—ã–ª–¥–∞–º –∂–∞—É–∞–ø –±–µ—Ä–µ–¥—ñ.</p>
        <textarea class="codebox" id="chatIn" placeholder="–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..."></textarea>
        <div class="actions">
          <button class="btn success" id="askBtn">–ñ—ñ–±–µ—Ä—É</button>
        </div>
        <div class="out" id="chatOut">ü§ñ –°”ô–ª–µ–º! –°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑.</div>
      </div>

      <div class="card">
        <h3>Embed —á–∞—Ç–±–æ—Ç (“õ–∞–ª–∞—Å–∞“£—ã–∑)</h3>
        <p class="muted">Botpress/Chatbase —Å–∏—è“õ—Ç—ã —Å–µ—Ä–≤–∏—Å—Ç–µ–Ω –∞–ª—ã–Ω“ì–∞–Ω iframe URL-–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.</p>
        <input class="input" id="embedUrl" placeholder="https://..." />
        <div class="actions">
          <button class="btn primary" id="saveEmbed">–°–∞“õ—Ç–∞—É</button>
        </div>
        <iframe id="embedFrame" style="width:100%;height:420px;border:1px solid rgba(255,255,255,.12);border-radius:16px;display:none;background:rgba(0,0,0,.15)"></iframe>
        <p class="help">URL –±–æ—Å –±–æ–ª—Å–∞ ‚Äî —Ç–µ–∫ —ñ—à–∫—ñ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ.</p>
      </div>
    </section>
  </div>

  <script type="module">
    import { mountNav, mountAssistant } from "./assets/app.js";
    mountNav();

    // Reuse modal assistant logic but also wire this page inputs
    mountAssistant();

    // Simple bridge: open modal style assistant not needed here; we call same elements by IDs
    // We'll just import bot via mountAssistant already, but assistant.html has its own fields.
    // So we use the internal assistant modal: click the floating button OR use these controls below:
    const askBtn = document.getElementById("askBtn");
    const chatIn = document.getElementById("chatIn");
    const chatOut = document.getElementById("chatOut");
    const saveEmbedBtn = document.getElementById("saveEmbed");
    const embedInput = document.getElementById("embedUrl");
    const iframe = document.getElementById("embedFrame");

    const EMBED_KEY = "aiinfolab_embed_url_v1";
    const getEmbed = ()=> localStorage.getItem(EMBED_KEY) || "";
    const setEmbed = (v)=> localStorage.setItem(EMBED_KEY, v);

    const bot = (msg)=>{
      const m = msg.toLowerCase();
      if (m.includes("“õ–∞—Ç–µ") || m.includes("error")) return "“ö–∞—Ç–µ —Ç–∞–ª–¥–∞—É: “õ–∞—Ç–µ –º”ô—Ç—ñ–Ω—ñ ‚Üí –∂–æ–ª ‚Üí —Å–∏–Ω—Ç–∞–∫—Å–∏—Å/–ª–æ–≥–∏–∫–∞ ‚Üí —à–∞“ì—ã–Ω —Ç–µ—Å—Ç.";
      if (m.includes("—Ü–∏–∫–ª") || m.includes("for") || m.includes("while")) return "–¶–∏–∫–ª: ”ô—Ä–µ–∫–µ—Ç—Ç—ñ “õ–∞–π—Ç–∞–ª–∞—É. for ‚Äî —Å–∞–Ω–∞—É—ã—à, while ‚Äî —à–∞—Ä—Ç.";
      if (m.includes("—à–∞—Ä—Ç") || m.includes("if")) return "if: —à–∞—Ä—Ç“õ–∞ “õ–∞—Ä–∞–π ”ô—Ä—Ç“Ø—Ä–ª—ñ ”ô—Ä–µ–∫–µ—Ç. else/else if “õ–æ–ª–¥–∞–Ω—É“ì–∞ –±–æ–ª–∞–¥—ã.";
      if (m.includes("–º–∞—Å—Å–∏–≤") || m.includes("array") || m.includes("list")) return "–ú–∞—Å—Å–∏–≤: —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä –∂–∏—ã–Ω—ã. arr.length, arr[i], for/of.";
      return "–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –Ω–∞“õ—Ç—ã–ª–∞“£—ã–∑ (—à–∞—Ä—Ç/—Ü–∏–∫–ª/–º–∞—Å—Å–∏–≤/—Ñ—É–Ω–∫—Ü–∏—è/“õ–∞—Ç–µ).";
    };

    askBtn.addEventListener("click", ()=>{
      const msg = chatIn.value.trim();
      if (!msg) return;
      chatOut.textContent += `\n\nüë§ ${msg}\nü§ñ ${bot(msg)}`;
      chatIn.value = "";
    });

    const apply = ()=>{
      const url = getEmbed().trim();
      embedInput.value = url;
      if (url){
        iframe.src = url;
        iframe.style.display = "block";
      } else {
        iframe.style.display = "none";
        iframe.removeAttribute("src");
      }
    };
    apply();

    saveEmbedBtn.addEventListener("click", ()=>{
      setEmbed(embedInput.value.trim());
      apply();
      alert("Embed URL —Å–∞“õ—Ç–∞–ª–¥—ã.");
    });
  </script>

  <div class="fab" id="fab" title="AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç"><span>AI</span></div>
  <div class="modal" id="modal">
    <div class="modal-panel">
      <div class="modal-head">
        <b>AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</b>
        <button class="btn" id="closeModal">–ñ–∞–±—É</button>
      </div>
      <div class="modal-body two">
        <div>
          <textarea class="codebox" id="chatIn" placeholder="..."></textarea>
          <div class="actions"><button class="btn success" id="askBtn">–ñ—ñ–±–µ—Ä—É</button></div>
          <div class="out" id="chatOut">ü§ñ –°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑.</div>
        </div>
        <div>
          <input class="input" id="embedUrl" placeholder="https://..." />
          <div class="actions"><button class="btn primary" id="saveEmbed">–°–∞“õ—Ç–∞—É</button></div>
          <iframe id="embedFrame" style="width:100%;height:360px;border:1px solid rgba(255,255,255,.12);border-radius:16px;display:none;background:rgba(0,0,0,.15)"></iframe>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
